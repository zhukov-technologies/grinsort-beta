# Руководство для управления ботом ГРИНСОРТ.

Бот доступен по ссылке https://t.me/tulgu_trash_bot

Рассмотрим принцип его работы, доступный функционал и распределение ролей для управления.

## Содержание
- [Что это за бот](#about)
- [Распределение функциональных ролей пользователей](#usage)
- - [Обычный пользователей без прав доступа](#user)
- - [Контролёр/водитель](#driver)
- - [Администратор](#admin)
- [Принципы и особенности работы бота](#principles)
- - [Схема работы с ботом](#scheme)
- - [Особенности и проблемы учета вторсырья](#problems)
- [Контакты](#contacts)

<a id="about"></a>
# Что это за бот

Данный бот это лишь бета-версия готовящейся глобальной всероссийской мультивселенской платформы Гринсорт, которая будет обладать куда большим функционалом и вообще будет самой-самой. Осталось лишь дождаться результатов конкурсного отбора.

Тем не менее, бот обладает весьма удобным и вполне работающим функционалом.

Задача данного бота - это облегчить организационную деятельность администратора по контролю за точками, где расставлены контейнеры со вторсырьем. Благодаря этому администратор или ответственное лицо компании, вывозящей вторсырье может знать где сколько какого вторсырья накопилось, чтобы удобно спланировать свой маршрут.

<a id="usage"></a>
# Распределение функциональных ролей пользователей

Так как функционал бота представлен в виде двух принципиально разных задач - контроль за наполненностью контейнеров и просвещение сторонних пользователей, внутри прошивки соблюдено строгое распределение ролей. 

Обычного пользователя, который случайно (или специально) нашел и ткнул в этот бот, необходимо снабдить полезной информацией. Например, выдать ему ссылки на полезные по эко-теме статьи или рассказать какое вторсырье и где принимается на территории ВУЗа.

Контролёр или водитель могут видеть то же меню, но дополнительно имеют возможность управлять уровнем заполненности контейнеров. 

И конечно же администратор. Как самый главный пользователь он имеет возможность видеть все описанные ранее пункты меню, но ещё и назначать ответственных контролёров и водителей. 

<a id="user"></a>
## Обычный пользователей без прав доступа

Предположим, кто-то прорекламировал данный бот в ТулГУ и люди ринулись тыкать и смотреть, что же он умеет, да либо просто нашли его случайно из поиска в Telegram.

Посмотрим, что же доступно обычным пользователям.

Их встречает такое меню:

![image](https://user-images.githubusercontent.com/84660518/229738711-25ef5d09-8b1a-4d81-85f3-e07c8c842ac4.png)

Нажатие на первую кнопку "О боте" знакомит пользователя с ботом:

![image](https://user-images.githubusercontent.com/84660518/229746909-b05f6757-50ab-4ecb-92e7-3026c78b0285.png)

Нажатие на кнопку "Что? Где? Когда?" покажет пользователю что где и когда он сможет сдать в контейнеры:

![image](https://user-images.githubusercontent.com/84660518/229747956-5b2eb857-8db5-487e-87ec-88f5779b3265.png)


Нажатие на кнопку "Полезные ссылки" даст пользователю кучу полезной инфомрации по эко-теме.

![image](https://user-images.githubusercontent.com/84660518/229747605-dd9720c0-57cd-45ab-9aa5-df3b47fb10aa.png)

А последний пункт "Мой ID" выдаст пользователю его ID. Это очень важный момент, обратите на это внимание. Что это такое и зачем будет понятно из следующих пунктов.

![image](https://user-images.githubusercontent.com/84660518/229748403-eda73451-a4d1-4d94-857f-9b1d4f870452.png)

<a id="driver"></a>
## Контролёр/водитель

Если бы обычные пользователи могли тыкать куда попало, наполняя и опусташая контейнеры просто так, была бы полная неразбериха, что существенно испортило наши благородные экологически-логистически начинания, верно? Поэтому в данном боте предусмотрена роль контролёра/водителя.

Почему же они объединены в один пункт? Всё допольно очевидно - у них одинаковый функционал. 

Контролёр управляет уровнем наполненности контейнеров в боте. Например, с утра контейнер был пустой, а к концу дня он заполнился уже на четверть. Контролер заглянул туда, увидел, и сделал отметку: на таком-то адресе такой-то контейнер уже с уровнем 25%. (Проблема такого учёта будет описана далее).

Водитель же (либо представитель компании-перевозчика) может получить информацию о наполненности контейнеров, а приехав и опустошив, отметить что такой-то контейнер по такому-то адресу уже пуст. 

Это лишь предлагаемый функционал, он ни в коем случае необязателен. По мере развития системы будет более удобный интерфейс, более строгое распределение обязанностей, но так как данный бот рабочая, но лишь бета-версия, всё может быть иначе. Например, сообщать компании-перевозчику где и что забрать может администратор, а "опустошать" контейнеры в боте при вывозе вторсырья может контролёр, ответственный за точку, не привлекая к пользованию водителей. 

Смоделируем ситуацию, где контролёр управляет уровнем наполненности контейнеров. Он, нажимая на кнопки, выбирает по какому адресу в каком контейнере он хочет изменить уровень:

![image](https://user-images.githubusercontent.com/84660518/229752406-2e286b0a-3569-4824-aa19-95dae1bf7d26.png)

Теперь, например, мы хотим посмотреть, по каким адресам и в каких контейнерах они заполненны на половину. Видим, что к другим добавился наш контейнер с ПЭТ бутылками, стоящий во втором корпусе, уровень которого мы только что изменили: 

![image](https://user-images.githubusercontent.com/84660518/229752922-a5f9d47c-e5bc-491b-87d4-85b746cacfea.png)

Теперь смоделируем другую ситуацию: прошла, например, неделя, и некоторые контейнеры уже полные. Водитель или администратор нажимают показать 100%, и им выводится список какие контейнеры и по каким адресам уже можно забирать. Затем ответственное за вывоз контейнеров лицо планирует маршрут в соответствии с предоставленным списком. Либо же администратор планирует маршрут и сообщает перевозчику точки, где пора опустошать контейнеры. 

![image](https://user-images.githubusercontent.com/84660518/229764363-7def729d-e024-4da1-ac4b-c9f2d6948442.png)

Помимо этого, бот предоставляет возможность удобно узнать точку на карте, где расположен контейнер. Это не просто изображение - это встроенное микроприложение с координатами. Да, именно дополнительное приложение внутри Телеграма. При пользовании Телеграмом с телефона или планшета при нажатии на точку, пользователя перекидывает в установленное по умолчанию приложение с картами в телефоне (Google Maps или Yandex Maps), где он одним кликом сможет построить маршрут до этой точки. 

![image](https://user-images.githubusercontent.com/84660518/229766244-066f7c89-8fed-4bc9-826e-f197d4ace989.png)

<a id="admin"></a>
## Администратор

Теперь поговорим об администраторе. Это пользователь с самыми полными правами доступа. Помимо возможностей контролёра и обычного пользователя, администратор имеет право назначать и удалять контролёров. У него все те же возможности в меню, но появляется дополнительная кнопка "Настройки".

Помните про ID пользователя, на который нужно было обратить внимание в одном из предыдущих разделов? Так вот, этот ID как раз и нужен чтобы делегировать права доступа обычным пользователям.
Работает это так: пользователь сообщает администратору свой ID, после чего администратор через меню настроек делегирует пользователю права на управление: 

![image](https://user-images.githubusercontent.com/84660518/229768751-c01d05a0-a05b-46dd-b380-77c2cc81361b.png)

<a id="principles"></a>
# Принципы и особенности работы бота

Теперь поговорим о принципах, возможностях и ограничениях работы данного бота.

<a id="scheme"></a>
## Схема работы с ботом

Схема работы на данный момент видится следующая:

Администратор назначает ответственных лиц на точки. Инструктирует их. Например, смотреть раз в день за уровнем наполненности контейнеров и не забывать отмечать это в боте. 

Ответственные лица (контролёры) периодически вносят изменения визуально контролируя уровень наполненности.

Администратор периодически проверяет уровень наполненности нажимая на кнопку "Показать 100%" или "Показать 80%" в зависимости от своего понимания, когда нужно организовывать вызов.

Администратор составляет список адресов где пора вывозить контейнеры в соответствии с предыдущим пунктом и сообщает их перевозчику, либо делигирует права пользователю, который будет вывозить вторсырье, чтобы он самостоятельно принимал решения о вывозе в соответствии с уровнем наполненности контейнеров.

Администратор может делегировать права не только уровня "водитель/контролёр", но и уровня "администратор", чтобы добавить себе ответственного помощника, который будет назначать других контролёров и вести подобный учёт. Всё на усмотрение самого администратора. 

<a id="problems"></a>
## Особенности и проблемы учета вторсырья

На данный момент не предложено простого способа контроля наполненности контейнеров в кг. Поэтому контролёрам предлагается осуществлять визуальный контроль.
Так как визуальный контроль не может быть обеспечен достоверностью 1%, 5% и даже 15%, в боте предусмотрена размерность в примерно в четверть контейнера: 25%, 50%, 80% и 100%.

Предлагаем администратору самостоятельно определить вес содержимого контейнера на основе его объёма и плотности вторсырья, находящегося в контейнере. 
К примеру, администратор замерил, что четверть контейнера с крышечками приблизительно равняется 5 кг, а половина - 10 кг, на основе чего у него имеется представление, о чем сообщать в компанию-перевозчик. Точно такой же подход предлагаем применять и к другим контейнерам. 

В будущем планируется обеспечить более точный и качественный весовой контроль либо с помощью применения электронных средств, либо с помощью изменениподхода к учёту веса.

Касательно альтернативного подхода мы столкнулись с существенными проблемами. Вот описание неудачных подходов:

1. Если изменить выбор процентов в меню бота клавишами +1кг, +5кг, +0.5кг и т.д., мы обрекаем контролера на вечное сожительство с контейнерами, чтобы проходящие мимо люди не просто выбросили свой мусор и пошли дальше, а выдали его сначала контролёру для взвешивания. Если же убрать контролера и дать возможность пользователям самим выбирать вес, который они только что выкинули, ничего хорошего тоже не выйдет: незаинтересованный пользователь и так делает одолжение выкидывая мусор не где попало, а сортируя его и выбрасывая в наши контейнеры, так мы еще и будем обременять его пользованием бота для учета.
2. Закрепить на контейнерах крючки или веревки и выдать контролёру безмен. Неплохо, но контролёр надорвет себе спину, либо придется слишком избирательно подходить к выбору контролёра, отдавая приоритет юношам-качкам.
3. Обеспечить каждый контейнер тензодатчиком с микроконтроллером и экраном (импровизированными весами). Наилучший вариант с точки зрения подхода. Но скорее всего потерпит крах ввиду стоимости компонентов - будет просто нерентабельно.


<a id="contacts"></a>
# Контакты
У авторов проекта учеба работа тренировки кружки секции семья собаки кошки, поэтому на проработку всех мелочей не хватает времени, особенно с учетом того, что данный проект на данный момент абсолютно некоммерческий (благотворительный). 
Множество задач по внедрению дополнительного функционала уже запланировано, множество проблем также будут решены при создании глобальной платформы Гринсорт в рамках реализации грантовой поддержки.

Тем не менее, если у вас есть любые предложения, особенно шикарная идея как решить вышеописанную проблему обеспечения высокуй точности контроля веса содержимого контейнеров, предусматривая реализуемость, экономическую эффективность и вы не боитесь грубой критики - пишите разработчику в [Телеграм](https://t.me/konstela) или [ВК](https://vk.com/z.bltrz).

Если боитесь - руководителю проекта в [Телеграм](https://t.me/dashamydila) или [ВК](https://vk.com/dasha_mydila).





